import{defineProperty as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{getTestId as t,ComponentDefaultTestId as i}from"../../tests/testIds.js";import o from"classnames";import r,{forwardRef as s,useRef as l,useMemo as a}from"react";import n from"../Tooltip/Tooltip.js";import p from"../../hooks/useIsOverflowing/useIsOverflowing.js";import m from"../../hooks/ssr/useIsomorphicLayoutEffect.js";import f from"../../hooks/useMergeRef.js";import c from"./TextWithHighlight.module.scss.js";var g=function(e,t,i){return i?r.createElement(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"em",{className:o(c.highlightText,arguments.length>4?arguments[4]:void 0),key:t},e):r.createElement("span",{key:t},e)},u=s((function(s,u){var h=s.className,d=s.id,v=s.text,T=void 0===v?"":v,E=s.highlightTerm,j=s.limit,x=s.useEllipsis,H=void 0===x||x,I=s.linesToClamp,w=void 0===I?3:I,y=s.ignoreCase,k=void 0===y||y,P=s.allowTermSplit,N=void 0===P||P,W=s.nonEllipsisTooltip,_=s.tooltipPosition,C=s.wrappingTextTag,O=void 0===C?"em":C,b=s.wrappingElementClassName,G=s.tooltipProps,L=void 0===G?{}:G,R=s["data-testid"],$=l(null),B=f(u,$),M=a((function(){if(!T||!E||0===j)return T;var e=E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");N&&(e=e.split(" ").join("|"));for(var t=RegExp("(".concat(e,")"),k?"i":""),i=T.split(t),o=[],r=0,s=0,l=0;i.length>l;l++)if(i[l]){var a=l%2==1;o.push(g(i[l],s++,a&&(!j||0>j||j>r),O,b)),a&&r++}return o}),[T,E,j,k,N,O,b]),S=p({ref:H&&$});m((function(){$.current&&$.current.style.setProperty("--heading-clamp-lines",""+w)}),[$,w,S]);var X=r.createElement("div",{ref:B,className:o(c.textWithHighlightWrapper,h,e({},c.withEllipsis,H)),id:d,"data-testid":R||t(i.TEXT_WITH_HIGHLIGHT,d)},M);return S||W?r.createElement(n,Object.assign({content:S?T:W,position:_},L),X):X}));export{u as default};
//# sourceMappingURL=TextWithHighlight.js.map
