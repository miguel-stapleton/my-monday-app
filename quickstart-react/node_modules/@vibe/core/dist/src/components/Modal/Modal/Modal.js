import{slicedToArray as e,defineProperty as t}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import o,{forwardRef as r,useRef as a,useState as i,useCallback as s,useMemo as n}from"react";import l from"classnames";import{RemoveScroll as m}from"react-remove-scroll";import c from"react-focus-lock";import{AnimatePresence as d,motion as u}from"framer-motion";import{getTestId as f}from"../../../tests/testIds.js";import{ComponentDefaultTestId as p}from"../../../tests/constants.js";import v from"./Modal.module.scss.js";import y from"../ModalTopActions/ModalTopActions.js";import{getStyle as E}from"../../../helpers/typesciptCssModulesHelper.js";import{camelCase as b}from"lodash-es";import{ModalProvider as j}from"../context/ModalContext.js";import{keyCodes as A}from"../../../constants/keyCodes.js";import"../../../constants/sizes.js";import{modalAnimationFullViewVariants as h,modalAnimationAnchorPopVariants as x,modalAnimationCenterPopVariants as M,modalAnimationOverlayVariants as T}from"../utils/animationVariants.js";import{createPortal as L}from"react-dom";import P from"../hooks/usePortalTarget/usePortalTarget.js";import C from"../../LayerProvider/LayerProvider.js";import k from"../../../hooks/useMergeRef.js";var w=c.default||c,I=r((function(r,c){var I=r.id,N=r.show,g=r.size,z=void 0===g?"medium":g,F=r.renderHeaderAction,H=r.closeButtonTheme,_=r.closeButtonAriaLabel,B=r.onClose,D=void 0===B?function(){}:B,R=r.autoFocus,O=void 0===R||R,V=r.onFocusAttempt,X=r.anchorElementRef,K=r.alertModal,S=r.container,Y=void 0===S?document.body:S,q=r.children,G=r.style,J=r.zIndex,Q=r.className,U=r["data-testid"],W=r["aria-labelledby"],Z=r["aria-describedby"],$=P(Y),ee=a(null),te=k(c,ee),oe=a(null),re=i(),ae=e(re,2),ie=ae[0],se=ae[1],ne=i(),le=e(ne,2),me=le[0],ce=le[1],de=s((function(e){W||se(e)}),[W]),ue=s((function(e){Z||ce(e)}),[Z]),fe=n((function(){return{modalId:I,setTitleId:de,setDescriptionId:ue,autoFocus:O}}),[I,de,ue,O]),pe=s((function(e){N&&!K&&D(e)}),[N,K,D]),ve=s((function(e){e.key===A.ESCAPE&&N&&!K&&D(e)}),[K,D,N]),ye="full-view"===z?h:(null==X?void 0:X.current)?x:M,Ee=J?{"--monday-modal-z-index":J}:{},be=s((function(e){if(!V)return!0;var t=V(e);return!0===t||t instanceof HTMLElement&&(t.focus(),!1)}),[V]);return o.createElement(d,null,N&&o.createElement(C,{layerRef:oe},o.createElement(j,{value:fe},L(o.createElement(w,{returnFocus:!0,autoFocus:O,whiteList:be},o.createElement("div",{ref:oe,className:v.container,style:Ee},o.createElement(u.div,{variants:T,initial:"initial",animate:"enter",exit:"exit","data-testid":f(p.MODAL_NEXT_OVERLAY,I),className:v.overlay,onClick:pe,"aria-hidden":!0}),o.createElement(m,{forwardProps:!0,ref:te},o.createElement(u.div,{variants:ye,initial:"exit",animate:"enter",exit:"exit",custom:X,className:l(v.modal,E(v,b("size-"+z)),t({},v.withHeaderAction,!!F),Q),id:I,"data-testid":U||f(p.MODAL_NEXT,I),role:"dialog","aria-modal":!0,"aria-labelledby":W||ie,"aria-describedby":Z||me,style:G,onKeyDown:ve,tabIndex:-1},q,o.createElement(y,{renderAction:F,theme:H,closeButtonAriaLabel:_,onClose:D}))))),$))))}));export{I as default};
//# sourceMappingURL=Modal.js.map
