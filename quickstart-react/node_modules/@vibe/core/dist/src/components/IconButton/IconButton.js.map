{"version":3,"file":"IconButton.js","sources":["../../../../src/components/IconButton/IconButton.tsx"],"sourcesContent":["import React, { AriaAttributes, forwardRef, Fragment, useMemo, useRef } from \"react\";\nimport cx from \"classnames\";\nimport { noop as NOOP } from \"lodash-es\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport Tooltip, { TooltipProps } from \"../Tooltip/Tooltip\";\nimport Icon from \"../Icon/Icon\";\nimport { AddSmall } from \"@vibe/icons\";\nimport { getWidthHeight, Size } from \"./services/IconButton-helpers\";\nimport { SubIcon, VibeComponentProps, withStaticProps } from \"../../types\";\nimport { getTestId } from \"../../tests/test-ids-utils\";\nimport { ComponentDefaultTestId, ComponentVibeId } from \"../../tests/constants\";\nimport Button from \"../Button/Button\";\nimport { BUTTON_ICON_SIZE, SMALL_BUTTON_ICON_SIZE } from \"../Button/ButtonConstants\";\nimport { ButtonColor, ButtonType } from \"../Button\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport styles from \"./IconButton.module.scss\";\n\nexport interface IconButtonProps extends VibeComponentProps {\n  /**\n   * Callback fired when the button is clicked.\n   */\n  onClick?: (event: React.MouseEvent) => void;\n  /**\n   * Class name applied to the button wrapper.\n   */\n  wrapperClassName?: string;\n  /**\n   * Class name applied to the icon.\n   */\n  iconClassName?: string;\n  /**\n   * The icon displayed inside the button.\n   */\n  icon?: SubIcon;\n  /**\n   * The ID of the element that labels this button.\n   */\n  ariaLabeledBy?: string;\n  /**\n   * The ARIA label for accessibility.\n   */\n  ariaLabel?: string;\n  /**\n   * If true, indicates that the button controls a popup.\n   */\n  ariaHasPopup?: React.HTMLProps<HTMLButtonElement>[\"aria-haspopup\"];\n  /**\n   * If true, indicates that the associated popup is open.\n   */\n  ariaExpanded?: boolean;\n  /**\n   * The ID of the region controlled by the button.\n   */\n  ariaControls?: string;\n  /**\n   * ID of the element describing the button.\n   */\n  \"aria-describedby\"?: AriaAttributes[\"aria-describedby\"];\n  /**\n   * If true, hides the button from assistive technologies.\n   */\n  \"aria-hidden\"?: AriaAttributes[\"aria-hidden\"];\n  /**\n   * Indicates the current \"pressed\" state of toggle buttons.\n   */\n  \"aria-pressed\"?: AriaAttributes[\"aria-pressed\"];\n  /**\n   * The size of the button.\n   */\n  size?: Size;\n  /**\n   * If true, hides the tooltip.\n   */\n  hideTooltip?: boolean;\n  /**\n   * Props for the Tooltip component.\n   */\n  tooltipProps?: Partial<TooltipProps>;\n  /**\n   * Tooltip content displayed on hover.\n   */\n  tooltipContent?: string;\n  /**\n   * The button variant.\n   */\n  kind?: ButtonType;\n  /**\n   * If true, the button is in an active state.\n   */\n  active?: boolean;\n  /**\n   * The color of the button.\n   */\n  color?: ButtonColor;\n  /**\n   * If true, the button is disabled.\n   */\n  disabled?: boolean;\n  /**\n   * If disabled, this message will be displayed in the tooltip.\n   */\n  disabledReason?: string;\n  /**\n   * If true, the focus indicator is displayed inside the button instead of around it.\n   */\n  insetFocus?: boolean;\n  /**\n   * The tab order of the button.\n   */\n  tabIndex?: number;\n  /**\n   * If true, a loader replaces the icon.\n   */\n  loading?: boolean;\n}\n\nconst IconButton = forwardRef(\n  (\n    {\n      className,\n      wrapperClassName,\n      iconClassName,\n      id,\n      icon = AddSmall,\n      size = \"medium\",\n      tooltipProps = {} as TooltipProps,\n      tooltipContent,\n      ariaLabeledBy,\n      ariaLabel,\n      ariaHasPopup,\n      ariaExpanded,\n      ariaControls,\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-hidden\": ariaHidden,\n      \"aria-pressed\": ariaPressed,\n      hideTooltip = false,\n      kind = \"tertiary\",\n      active,\n      disabled = false,\n      disabledReason,\n      onClick = NOOP,\n      color,\n      \"data-testid\": dataTestId,\n      insetFocus = false,\n      tabIndex,\n      loading = false\n    }: IconButtonProps,\n    ref: React.ForwardedRef<HTMLElement>\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n\n    const overrideTooltipContent = useMemo(\n      () => tooltipProps?.content || tooltipContent,\n      [tooltipProps?.content, tooltipContent]\n    );\n\n    const buttonAriaLabel = useMemo(() => {\n      if (ariaLabel) return ariaLabel;\n      if (typeof overrideTooltipContent === \"string\") return overrideTooltipContent;\n      return undefined;\n    }, [ariaLabel, overrideTooltipContent]);\n\n    const iconSize = useMemo(() => {\n      switch (size) {\n        case \"xxs\":\n        case \"xs\":\n          return SMALL_BUTTON_ICON_SIZE;\n        case \"small\":\n        case \"medium\":\n        case \"large\":\n          return BUTTON_ICON_SIZE;\n        default:\n          return 24;\n      }\n    }, [size]);\n\n    const overrideStyle = useMemo(() => {\n      let style = {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        padding: 0\n      } as React.CSSProperties;\n\n      if (size) {\n        style = { ...style, ...getWidthHeight(size) };\n      }\n      return style;\n    }, [size]);\n\n    const calculatedTooltipContent = useMemo(() => {\n      if (hideTooltip) return null;\n      if (disabled && disabledReason) return disabledReason;\n      if (overrideTooltipContent) return overrideTooltipContent as never;\n      return ariaLabel;\n    }, [hideTooltip, disabled, disabledReason, overrideTooltipContent, ariaLabel]);\n\n    const IconButtonWrapper = wrapperClassName ? \"div\" : Fragment;\n    const iconButtonWrapperProps = useMemo(() => {\n      return wrapperClassName ? { className: cx(wrapperClassName, styles.wrapper) } : {};\n    }, [wrapperClassName]);\n\n    return (\n      <IconButtonWrapper {...iconButtonWrapperProps}>\n        <Tooltip\n          {...tooltipProps}\n          content={calculatedTooltipContent}\n          referenceWrapperClassName={styles.referenceWrapper}\n        >\n          <Button\n            onClick={onClick}\n            disabled={disabled}\n            color={color}\n            kind={kind}\n            ariaLabeledBy={ariaLabeledBy}\n            ariaLabel={buttonAriaLabel}\n            ariaHasPopup={ariaHasPopup}\n            ariaExpanded={ariaExpanded}\n            ariaControls={ariaControls}\n            aria-describedby={ariaDescribedBy}\n            aria-hidden={ariaHidden}\n            aria-pressed={ariaPressed}\n            ref={mergedRef}\n            id={id}\n            data-testid={dataTestId || getTestId(ComponentDefaultTestId.ICON_BUTTON, id)}\n            data-vibe={ComponentVibeId.ICON_BUTTON}\n            noSidePadding\n            active={active}\n            className={className}\n            style={overrideStyle}\n            insetFocus={insetFocus}\n            tabIndex={tabIndex}\n            loading={loading}\n            loaderClassName={cx(styles.loader, getStyle(styles, size))}\n          >\n            <Icon icon={icon} iconType=\"svg\" iconSize={iconSize} ignoreFocusStyle className={iconClassName} />\n          </Button>\n        </Tooltip>\n      </IconButtonWrapper>\n    );\n  }\n);\n\ninterface IconButtonStaticProps {\n  sizes: typeof Button.sizes;\n  kinds: typeof Button.kinds;\n  colors: typeof Button.colors;\n}\n\nexport default withStaticProps<IconButtonProps, IconButtonStaticProps>(IconButton, {\n  sizes: Button.sizes,\n  kinds: Button.kinds,\n  colors: Button.colors\n});\n"],"names":["withStaticProps","forwardRef","_ref","ref","className","wrapperClassName","iconClassName","id","_ref$icon","icon","AddSmall","_ref$size","size","_ref$tooltipProps","tooltipProps","tooltipContent","ariaLabeledBy","ariaLabel","ariaHasPopup","ariaExpanded","ariaControls","ariaDescribedBy","ariaHidden","ariaPressed","_ref$hideTooltip","hideTooltip","_ref$kind","kind","active","_ref$disabled","disabled","disabledReason","_ref$onClick","onClick","NOOP","color","dataTestId","_ref$insetFocus","insetFocus","tabIndex","_ref$loading","loading","componentRef","useRef","mergedRef","useMergeRef","overrideTooltipContent","useMemo","content","buttonAriaLabel","iconSize","SMALL_BUTTON_ICON_SIZE","BUTTON_ICON_SIZE","overrideStyle","style","justifyContent","alignItems","padding","Object","assign","getWidthHeight","calculatedTooltipContent","IconButtonWrapper","Fragment","iconButtonWrapperProps","cx","styles","wrapper","React","createElement","Tooltip","referenceWrapperClassName","referenceWrapper","Button","getTestId","ComponentDefaultTestId","ICON_BUTTON","ComponentVibeId","noSidePadding","loaderClassName","loader","getStyle","Icon","iconType","ignoreFocusStyle","sizes","kinds","colors"],"mappings":"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"}