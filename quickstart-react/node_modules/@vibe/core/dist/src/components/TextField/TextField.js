import{slicedToArray as e,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import o from"classnames";import a,{forwardRef as n,useState as r,useRef as i,useCallback as l,useMemo as s,useEffect as c}from"react";import d from"../../hooks/useDebounceEvent/index.js";import m from"../Icon/Icon.js";import u from"../Loader/Loader.js";import p from"../Text/Text.js";import v from"../FieldLabel/FieldLabel.js";import{TextFieldFeedbackState as f,TextFieldTextType as C,FEEDBACK_CLASSES as b,SIZE_MAPPER as x,TextFieldAriaLabel as y}from"./TextFieldConstants.js";import{BASE_SIZES as E}from"../../constants/sizes.js";import T from"../../hooks/useMergeRef.js";import N from"../Clickable/Clickable.js";import{getTestId as h}from"../../tests/testIds.js";import{NOOP as g}from"../../utils/function-utils.js";import{ComponentDefaultTestId as I,ComponentVibeId as j}from"../../tests/constants.js";import{withStaticProps as F}from"../../types/withStaticProps.js";import"../../utils/colors-vars-map.js";import L from"./TextField.module.scss.js";import k from"../Tooltip/Tooltip.js";import D from"../HiddenText/HiddenText.js";var w={primary:"",secondary:""},H=F(n((function(n,f){var C=n.className,E=void 0===C?"":C,F=n.placeholder,H=void 0===F?"":F,A=n.autoComplete,S=void 0===A?"off":A,_=n.value,q=n.onChange,R=void 0===q?g:q,W=n.onBlur,z=void 0===W?g:W,B=n.onFocus,O=void 0===B?g:B,K=n.onKeyDown,M=void 0===K?g:K,P=n.onWheel,V=void 0===P?g:P,X=n.debounceRate,U=void 0===X?0:X,Y=n.autoFocus,G=void 0!==Y&&Y,J=n.disabled,Q=void 0!==J&&J,Z=n.readonly,$=void 0!==Z&&Z,ee=n.setRef,te=void 0===ee?g:ee,oe=n.iconName,ae=n.secondaryIconName,ne=n.id,re=void 0===ne?"input":ne,ie=n.title,le=void 0===ie?"":ie,se=n.size,ce=void 0===se?"small":se,de=n.validation,me=void 0===de?null:de,ue=n.wrapperClassName,pe=void 0===ue?"":ue,ve=n.onIconClick,fe=void 0===ve?g:ve,Ce=n.clearOnIconClick,be=void 0!==Ce&&Ce,xe=n.labelIconName,ye=n.showCharCount,Ee=void 0!==ye&&ye,Te=n.inputAriaLabel,Ne=n.searchResultsContainerId,he=void 0===Ne?"":Ne,ge=n.activeDescendant,Ie=void 0===ge?"":ge,je=n.iconsNames,Fe=void 0===je?w:je,Le=n.type,ke=void 0===Le?"text":Le,De=n.maxLength,we=void 0===De?null:De,He=n.allowExceedingMaxLength,Ae=void 0!==He&&He,Se=n.trim,_e=void 0!==Se&&Se,qe=n.role,Re=void 0===qe?"":qe,We=n.required,ze=void 0!==We&&We,Be=n.requiredErrorText,Oe=void 0===Be?"":Be,Ke=n.loading,Me=void 0!==Ke&&Ke,Pe=n["data-testid"],Ve=n.secondaryDataTestId,Xe=n.tabIndex,Ue=n.underline,Ye=void 0!==Ue&&Ue,Ge=n.name,Je=n.controlled,Qe=void 0!==Je&&Je,Ze=n.iconTooltipContent,$e=n.secondaryTooltipContent,et=n.dir,tt=r(!1),ot=e(tt,2),at=ot[0],nt=ot[1],rt=i(null),it=T(f,rt,te),lt=l((function(e){ze&&!e.target.value&&nt(!0),z(e)}),[z,ze]),st=l((function(e,t){at&&e&&nt(!1),R(e,t||{target:rt.current})}),[R,at]),ct=d({delay:U,onChange:st,initialStateValue:_,trim:_e}),dt=ct.inputValue,mt=ct.onEventChanged,ut=ct.clearValue,pt=s((function(){return Qe?_:dt}),[Qe,_,dt]),vt=l((function(e){Qe?st(e.target.value,e):mt(e)}),[Qe,st,mt]),ft=s((function(){return ae&&pt?ae:oe}),[oe,ae,pt]),Ct=l((function(){Q||(be&&(rt.current&&rt.current.focus(),rt.current.value="",Qe?st(""):ut()),fe(ft))}),[Q,be,fe,ft,Qe,st,ut]),bt=s((function(){return"number"==typeof we&&pt&&pt.length>we?b.error:me&&me.status||at?b[at?"error":me.status]:""}),[we,me,at,pt]),xt=oe||ae,yt=Ee||me&&me.text||at&&Oe,Et=ae===ft,Tt=oe===ft,Nt=(fe!==g||Fe.primary||Ze)&&pt&&oe.length&&Tt,ht=(ae||$e)&&Et&&!!pt,gt=Ae?"".concat(re,"-allow-exceeding-max-length-text"):void 0;c((function(){if((null==rt?void 0:rt.current)&&G){var e=requestAnimationFrame((function(){return rt.current.focus()}));return function(){return cancelAnimationFrame(e)}}}),[rt,G]);var It=fe!==g||be,jt=Fe.primary||Ze,Ft=Fe.secondary||$e;return a.createElement("div",{className:o(L.textField,pe,t(t({},L.disabled,Q),L.onlyUnderline,Ye)),role:Re,"aria-busy":Me},a.createElement("div",{className:o(L.labelWrapper)},a.createElement(v,{labelText:le,icon:xe,labelFor:re,required:ze}),a.createElement("div",{className:o(L.inputWrapper,x[ce],bt)},a.createElement("input",{className:o(E,L.input,t(t({},L.inputHasIcon,!!xt),L.readOnly,$)),placeholder:H,autoComplete:S,value:pt,onChange:vt,disabled:Q,readOnly:$,ref:it,type:ke,id:re,"data-testid":Pe||h(I.TEXT_FIELD,re),"data-vibe":j.TEXT_FIELD,name:Ge,onBlur:lt,onFocus:O,onKeyDown:M,onWheel:V,maxLength:"number"!=typeof we||Ae?void 0:we,role:he&&"combobox","aria-label":Te||H,"aria-invalid":me&&"error"===me.status||at,"aria-owns":he,"aria-activedescendant":Ie,"aria-required":ze,"aria-describedby":gt,required:ze,tabIndex:Xe,dir:et}),Me&&a.createElement("div",{className:o(L.loaderContainer,t({},L.loaderContainerHasIcon,xt))},a.createElement("div",{className:o(L.loader)},a.createElement(u,{className:o(L.loaderSvg)}))),a.createElement(k,{content:Tt?Ze:void 0,referenceWrapperClassName:L.tooltipContainer},a.createElement(N,{className:o(L.iconContainer,t(t(t({},L.iconContainerHasIcon,xt),L.iconContainerActive,Tt),L.iconContainerClickable,It)),onClick:Ct,tabIndex:Nt?"0":"-1",ariaLabel:jt},a.createElement(m,{icon:oe,className:o(L.icon),iconType:"font",iconSize:"small"===ce?"16px":"18px"}))),a.createElement(k,{content:Et?$e:void 0,addKeyboardHideShowTriggersByDefault:!0,referenceWrapperClassName:L.tooltipContainer},a.createElement(N,{className:o(L.iconContainer,t(t(t({},L.iconContainerHasIcon,xt),L.iconContainerActive,Et),L.iconContainerClickable,It)),onClick:Ct,tabIndex:ht?"0":"-1","data-testid":Ve||h(I.TEXT_FIELD_SECONDARY_BUTTON,re),ariaLabel:Ft},a.createElement(m,{icon:ae,className:o(L.icon),iconType:"font",iconSize:"small"===ce?"16px":"18px"})))),yt&&a.createElement(p,{type:"text2",color:"secondary",className:o(L.subTextContainer)},me&&me.text&&a.createElement("span",{className:o(L.subTextContainerStatus)},at?Oe:me.text),Ee&&a.createElement("span",{className:o(L.counter),"aria-label":y.CHAR},pt&&pt.length||0,"number"==typeof we&&"/".concat(we),a.createElement(D,{id:gt,text:"Maximum of ".concat(we," characters")})))))})),{sizes:E,feedbacks:f,types:C});export{H as default};
//# sourceMappingURL=TextField.js.map
