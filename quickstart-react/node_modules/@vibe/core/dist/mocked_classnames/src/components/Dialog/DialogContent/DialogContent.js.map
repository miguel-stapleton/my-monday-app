{"version":3,"file":"DialogContent.js","sources":["../../../../../../src/components/Dialog/DialogContent/DialogContent.tsx"],"sourcesContent":["import React, { cloneElement, CSSProperties, forwardRef, ReactElement, useCallback, useEffect, useRef } from \"react\";\nimport cx from \"classnames\";\nimport { camelCase } from \"lodash-es\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { CSSTransitionProps } from \"react-transition-group/CSSTransition\";\nimport useClickOutside from \"../../../hooks/useClickOutside\";\nimport { chainFunctions, NOOP } from \"../../../utils/function-utils\";\nimport useKeyEvent from \"../../../hooks/useKeyEvent\";\nimport { VibeComponentProps } from \"../../../types\";\nimport { keyCodes } from \"../../../constants\";\nimport { DialogAnimationType, DialogTriggerEvent } from \"../Dialog.types\";\nimport * as PopperJS from \"@popperjs/core\";\nimport { getStyle } from \"../../../helpers/typesciptCssModulesHelper\";\nimport styles from \"./DialogContent.module.scss\";\nimport useDisableScroll from \"../../../hooks/useDisableScroll\";\n\nconst EMPTY_OBJECT = {};\nconst ESCAPE_KEYS = [keyCodes.ESCAPE];\n\nexport interface DialogContentProps extends VibeComponentProps {\n  /**\n   * The content inside the dialog.\n   */\n  children?: ReactElement | ReactElement[];\n  /**\n   * The placement of the dialog relative to the reference element.\n   */\n  position?: PopperJS.Placement;\n  /**\n   * Class name applied to the dialog wrapper.\n   */\n  wrapperClassName?: string;\n  /**\n   * If true, the dialog is open.\n   */\n  isOpen?: boolean;\n  // TODO: [breaking] use type\n  /**\n   * The starting edge of the dialog.\n   */\n  startingEdge?: any;\n  /**\n   * The animation type used for showing/hiding the dialog.\n   */\n  animationType?: DialogAnimationType;\n  /**\n   * Callback fired when the Escape key is pressed.\n   */\n  onEsc?: (event: React.KeyboardEvent) => void;\n  /**\n   * Callback fired when the mouse enters the dialog.\n   */\n  onMouseEnter?: (event: React.MouseEvent) => void;\n  /**\n   * Callback fired when the mouse leaves the dialog.\n   */\n  onMouseLeave?: (event: React.MouseEvent) => void;\n  /**\n   * Callback fired when clicking outside the dialog.\n   */\n  onClickOutside?: (event: React.MouseEvent, hideShowEvent: DialogTriggerEvent) => void;\n  /**\n   * Callback fired when clicking inside the dialog.\n   */\n  onClick?: (event: React.MouseEvent) => void;\n  /**\n   * Delay before showing the dialog.\n   */\n  showDelay?: number;\n  /**\n   * Inline styles applied to the dialog.\n   */\n  styleObject?: CSSProperties;\n  /**\n   * If true, hides the reference element when the dialog is shown.\n   */\n  isReferenceHidden?: boolean;\n  /**\n   * If true, applies tooltip arrow to the dialog.\n   */\n  hasTooltip?: boolean;\n  /**\n   * The CSS selector of the container where the dialog should be rendered.\n   */\n  containerSelector?: string;\n  /**\n   * If true, disables scrolling in the container when the dialog is open.\n   */\n  disableContainerScroll?: boolean | string;\n  /**\n   * Callback fired when the context menu (right-click) event occurs outside the dialog.\n   */\n  onContextMenu?: (e: React.MouseEvent) => void;\n}\n\nconst DialogContent = forwardRef(\n  (\n    {\n      onEsc = NOOP,\n      children,\n      position,\n      wrapperClassName,\n      isOpen = false,\n      startingEdge,\n      animationType = \"expand\",\n      onMouseEnter = NOOP,\n      onMouseLeave = NOOP,\n      onClickOutside = NOOP,\n      onClick = NOOP,\n      onContextMenu = NOOP,\n      showDelay,\n      styleObject = EMPTY_OBJECT,\n      isReferenceHidden,\n      hasTooltip = false,\n      containerSelector,\n      disableContainerScroll = false,\n      \"data-testid\": dataTestId\n    }: DialogContentProps,\n    forwardRef: React.ForwardedRef<HTMLElement>\n  ) => {\n    const ref = useRef(null);\n    const onOutSideClick = useCallback(\n      (event: React.MouseEvent) => {\n        if (isOpen) {\n          return onClickOutside(event, \"clickoutside\");\n        }\n      },\n      [isOpen, onClickOutside]\n    );\n    const overrideOnContextMenu = useCallback(\n      (event: React.MouseEvent) => {\n        if (isOpen) {\n          onContextMenu(event);\n        }\n      },\n      [isOpen, onContextMenu]\n    );\n    useKeyEvent({ keys: ESCAPE_KEYS, callback: onEsc });\n    useClickOutside({ callback: onOutSideClick, ref });\n    useClickOutside({ eventName: \"contextmenu\", callback: overrideOnContextMenu, ref });\n    const selectorToDisable = typeof disableContainerScroll === \"string\" ? disableContainerScroll : containerSelector;\n    const { disableScroll, enableScroll } = useDisableScroll(selectorToDisable);\n\n    useEffect(() => {\n      if (disableContainerScroll) {\n        if (isOpen) {\n          disableScroll();\n        } else {\n          enableScroll();\n        }\n      }\n    }, [disableContainerScroll, disableScroll, enableScroll, isOpen]);\n\n    const transitionOptions: Partial<CSSTransitionProps> = { classNames: undefined };\n\n    switch (animationType) {\n      case \"expand\":\n        transitionOptions.classNames = {\n          appear: styles.expandAppear,\n          appearActive: styles.expandAppearActive,\n          exit: styles.expandExit\n        };\n        break;\n      case \"opacity-and-slide\":\n        transitionOptions.classNames = {\n          appear: styles.opacitySlideAppear,\n          appearActive: styles.opacitySlideAppearActive\n        };\n        break;\n    }\n    return (\n      <span\n        // don't remove old classname - override from Monolith\n        className={cx(\"monday-style-dialog-content-wrapper\", styles.contentWrapper, wrapperClassName)}\n        ref={forwardRef}\n        data-testid={dataTestId}\n        style={styleObject}\n        onClickCapture={onClick}\n        data-popper-reference-hidden={isReferenceHidden}\n      >\n        <CSSTransition {...transitionOptions} in={isOpen} appear={!!animationType} timeout={showDelay}>\n          <div\n            className={cx(styles.contentComponent, getStyle(styles, camelCase(position)), {\n              [getStyle(styles, camelCase(\"edge-\" + startingEdge))]: startingEdge,\n              [styles.hasTooltip]: hasTooltip\n            })}\n            ref={ref}\n          >\n            {React.Children.toArray(children).map((child: ReactElement) => {\n              return cloneElement(child, {\n                onMouseEnter: chainFunctions([child.props.onMouseEnter, onMouseEnter]),\n                onMouseLeave: chainFunctions([child.props.onMouseLeave, onMouseLeave])\n              });\n            })}\n          </div>\n        </CSSTransition>\n      </span>\n    );\n  }\n);\n\nexport default DialogContent;\n"],"names":["EMPTY_OBJECT","ESCAPE_KEYS","keyCodes","ESCAPE","DialogContent","forwardRef","_ref","_ref$onEsc","onEsc","NOOP","children","position","wrapperClassName","_ref$isOpen","isOpen","startingEdge","_ref$animationType","animationType","_ref$onMouseEnter","onMouseEnter","_ref$onMouseLeave","onMouseLeave","_ref$onClickOutside","onClickOutside","_ref$onClick","onClick","_ref$onContextMenu","onContextMenu","showDelay","_ref$styleObject","styleObject","isReferenceHidden","_ref$hasTooltip","hasTooltip","containerSelector","_ref$disableContainer","disableContainerScroll","dataTestId","ref","useRef","onOutSideClick","useCallback","event","overrideOnContextMenu","useKeyEvent","keys","callback","useClickOutside","eventName","_useDisableScroll","useDisableScroll","disableScroll","enableScroll","useEffect","transitionOptions","classNames","undefined","appear","styles","expandAppear","appearActive","expandAppearActive","exit","expandExit","opacitySlideAppear","opacitySlideAppearActive","React","createElement","className","cx","contentWrapper","style","onClickCapture","CSSTransition","Object","assign","in","timeout","contentComponent","getStyle","camelCase","_defineProperty","Children","toArray","map","child","cloneElement","chainFunctions","props"],"mappings":"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"}