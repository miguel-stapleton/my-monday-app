import{objectWithoutProperties as e,slicedToArray as t,defineProperty as n,extends as o}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import i,{useState as a,useEffect as l,useCallback as r}from"react";import{components as s}from"react-select";import c from"classnames";import{useHiddenOptionsData as p}from"../../hooks/useHiddenOptionsData.js";import u from"../../../Counter/Counter.js";import m from"../../../Dialog/Dialog.js";import d from"../../../DialogContentContainer/DialogContentContainer.js";import h from"../../../Chips/Chips.js";import f from"./MultiValueContainer.module.scss.js";var v=["children","selectProps"];function g(g){var C=g.children,E=g.selectProps,D=e(g,v),w=E.isDisabled,P=E.placeholder,N=E.inputValue,b=E.selectProps,y=void 0===b?{}:b,j=E.withMandatoryDefaultOptions,M=E.readOnly,O=y.selectedOptions,k=y.onSelectedDelete,x=y.isMultiline,A=y.popupsContainerSelector,S=y.size,T=y.dialogClassName,V=C[1],B=a(),I=t(B,2),F=I[0],H=I[1],R=a(!1),W=t(R,2),_=W[0],z=W[1],q=0===O.length&&!N,G=f["chip-with-input-wrapper"],J=c(x?f["multiselect-chip-multi-line"]:f["multiselect-chip-single-line-".concat(S)],n({},f["multiselect-chip-disabled"],w)),K=p({isMultiline:x,ref:F,chipClassName:J,chipWrapperClassName:G,selectedOptionsCount:O.length,isCounterShown:_}),L=K.overflowIndex,Q=K.hiddenOptionsCount;l((function(){z(Q>0)}),[Q]);var U=r((function(e){k(e.value,{action:"remove-value",removedValue:e})}),[k]),X=["primary","negative","positive"],Y=r((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.length;return O.map((function(n,o){var a=X.includes(n.chipColor)?n.chipColor:"primary";return o>=e&&t>o?i.createElement(h,{"data-testid":"value-container-chip",key:n.value,className:c(f.chips,J),noAnimation:!0,disabled:w,id:n.value,label:n.label,onDelete:function(){return U(n)},disableClickableBehavior:!0,onMouseDown:function(e){e.stopPropagation()},readOnly:M||j&&n.isMandatory,allowTextSelection:M,leftRenderer:n.leftRenderer,leftAvatar:n.leftAvatar,leftIcon:n.leftIcon,color:a}):null}))}),[O,J,w,M,j,U,S]);return i.createElement(s.ValueContainer,o({selectProps:E},D),i.createElement("div",{className:f["value-container"],onTouchEndCapture:function(e){e.stopPropagation()}},q&&i.createElement("div",{className:f["placeholder-container"]},i.createElement(s.Placeholder,D,P)),i.createElement("div",{className:c(f["value-container-chips"],n({},f["without-placeholder"],!q)),ref:function(e){return H(e)},"data-testid":"value-container-chips"},_?i.createElement(i.Fragment,null,Y(0,L-1),i.createElement("div",{className:G},Y(L-1,L),V),Y(L)):i.createElement(i.Fragment,null,Y(0,O.length-1),i.createElement("div",{className:G},Y(O.length-1),V))),i.createElement("div",null,_&&i.createElement(m,{content:function(){return i.createElement(d,{className:f.valueDialogContent,onMouseDown:function(e){e.stopPropagation()}},Y(L))},containerSelector:A,tooltip:!0,showTrigger:"click",hideTrigger:"clickoutside",position:"bottom",moveBy:{main:5},wrapperClassName:T},i.createElement(u,{kind:"line",prefix:"+",count:Q,onMouseDown:function(e){e.stopPropagation()},noAnimation:!0})))))}export{g as default};
//# sourceMappingURL=MultiValueContainer.js.map
