{"version":3,"file":"MenuItemButton.js","sources":["../../../../../../src/components/Menu/MenuItemButton/MenuItemButton.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { useRef } from \"react\";\nimport { ComponentDefaultTestId, getTestId } from \"../../../tests/test-ids-utils\";\nimport Button from \"../../Button/Button\";\nimport Tooltip from \"../../Tooltip/Tooltip\";\nimport { ButtonType } from \"../../Button\";\nimport useMergeRef from \"../../../hooks/useMergeRef\";\nimport useMenuItemMouseEvents from \"../MenuItem/hooks/useMenuItemMouseEvents\";\nimport useMenuItemKeyboardEvents from \"../MenuItem/hooks/useMenuItemKeyboardEvents\";\nimport { SubIcon, VibeComponentProps, withStaticProps, ElementContent } from \"../../../types\";\nimport Text from \"../../Text/Text\";\nimport styles from \"./MenuItemButton.module.scss\";\nimport { TooltipPositions } from \"../../Tooltip\";\nimport { TooltipPositions as TooltipPositionsEnum } from \"../../Tooltip/TooltipConstants\";\n\nexport interface MenuItemButtonProps extends VibeComponentProps {\n  /**\n   * The style variant of the button.\n   */\n  kind?: ButtonType;\n  /**\n   * Icon displayed on the left side of the button.\n   */\n  leftIcon?: SubIcon;\n  /**\n   * Icon displayed on the right side of the button.\n   */\n  rightIcon?: SubIcon;\n  /**\n   * The index of the menu item in the menu.\n   */\n  index?: number;\n  /**\n   * The index of the currently active menu item.\n   */\n  activeItemIndex?: number;\n  /**\n   * If true, the button is disabled.\n   */\n  disabled?: boolean;\n  /**\n   * The reason why the button is disabled, displayed as a tooltip.\n   */\n  disableReason?: string;\n  /**\n   * Callback fired when the button is clicked.\n   */\n  onClick?: (event: React.MouseEvent | React.KeyboardEvent) => void;\n  /**\n   * The position of the tooltip.\n   */\n  tooltipPosition?: TooltipPositions;\n  /**\n   * The delay in milliseconds before the tooltip appears.\n   */\n  tooltipShowDelay?: number;\n  /**\n   * Callback to reset the open submenu index.\n   */\n  resetOpenSubMenuIndex?: () => void;\n  /**\n   * Callback to open or close a submenu by index.\n   */\n  setSubMenuIsOpenByIndex?: (index: number, isOpen: boolean) => void;\n  /**\n   * Callback to set the active item index.\n   */\n  setActiveItemIndex?: (index: number) => void;\n  /**\n   * Reference to the menu container.\n   */\n  menuRef?: React.RefObject<HTMLElement>;\n  /**\n   * Function to close the menu.\n   */\n  closeMenu?: () => void;\n  /**\n   * If true, event listeners are added at the document level.\n   */\n  useDocumentEventListeners?: boolean;\n  /**\n   * The content of the button.\n   */\n  children?: ElementContent | ElementContent[];\n}\n\nconst MenuItemButton = ({\n  className,\n  kind = \"primary\",\n  leftIcon = null,\n  rightIcon = null,\n  disabled = false,\n  disableReason,\n  index,\n  activeItemIndex = -1,\n  onClick,\n  tooltipPosition = \"right\",\n  tooltipShowDelay = 300,\n  children,\n  resetOpenSubMenuIndex,\n  setSubMenuIsOpenByIndex,\n  setActiveItemIndex,\n  menuRef,\n  closeMenu,\n  useDocumentEventListeners,\n  id,\n  \"data-testid\": dataTestId\n}: MenuItemButtonProps) => {\n  const ref = useRef(null);\n  const referenceElementRef = useRef(null);\n  const mergedRef = useMergeRef(ref, referenceElementRef);\n\n  const shouldShowTooltip = disabled && disableReason;\n  const tooltipContent = disableReason;\n\n  const isActive = activeItemIndex === index;\n\n  const isMouseEnter = useMenuItemMouseEvents({\n    ref,\n    resetOpenSubMenuIndex,\n    setSubMenuIsOpenByIndex,\n    isActive,\n    setActiveItemIndex,\n    index,\n    hasChildren: false\n  });\n\n  const { onClickCallback } = useMenuItemKeyboardEvents({\n    onClick,\n    disabled,\n    isActive,\n    index,\n    setActiveItemIndex,\n    hasChildren: false,\n    shouldShowSubMenu: false,\n    setSubMenuIsOpenByIndex,\n    menuRef,\n    isMouseEnter,\n    closeMenu,\n    useDocumentEventListeners\n  });\n\n  return (\n    <Tooltip\n      content={shouldShowTooltip ? tooltipContent : null}\n      position={tooltipPosition}\n      showDelay={tooltipShowDelay}\n    >\n      <Text\n        type=\"text2\"\n        element=\"li\"\n        data-testid={dataTestId || getTestId(ComponentDefaultTestId.MENU_ITEM_BUTTON, id)}\n        id={id}\n        className={cx(styles.itemButton, className)}\n        ref={mergedRef}\n        role=\"menuitem\"\n        aria-current={isActive}\n      >\n        <Button\n          className={styles.buttonComponent}\n          active={isActive}\n          disabled={disabled}\n          leftIcon={leftIcon}\n          rightIcon={rightIcon}\n          onClick={onClickCallback}\n          kind={kind}\n          size=\"small\"\n          blurOnMouseUp={false}\n        >\n          <div className={styles.content}>{children}</div>\n        </Button>\n      </Text>\n    </Tooltip>\n  );\n};\n\nObject.assign(MenuItemButton, {\n  isSelectable: true,\n  isMenuChild: true\n});\n\ninterface MenuItemButtonStaticProps {\n  kinds: typeof Button.kinds;\n  tooltipPositions: typeof TooltipPositionsEnum;\n}\n\nexport default withStaticProps<MenuItemButtonProps, MenuItemButtonStaticProps>(MenuItemButton, {\n  kinds: Button.kinds,\n  tooltipPositions: TooltipPositionsEnum\n});\n"],"names":["MenuItemButton","_ref","className","_ref$kind","kind","_ref$leftIcon","leftIcon","_ref$rightIcon","rightIcon","_ref$disabled","disabled","disableReason","index","_ref$activeItemIndex","activeItemIndex","onClick","_ref$tooltipPosition","tooltipPosition","_ref$tooltipShowDelay","tooltipShowDelay","children","resetOpenSubMenuIndex","setSubMenuIsOpenByIndex","setActiveItemIndex","menuRef","closeMenu","useDocumentEventListeners","id","dataTestId","ref","useRef","referenceElementRef","mergedRef","useMergeRef","shouldShowTooltip","tooltipContent","isActive","isMouseEnter","useMenuItemMouseEvents","hasChildren","onClickCallback","useMenuItemKeyboardEvents","shouldShowSubMenu","React","Tooltip","content","position","showDelay","createElement","Text","type","element","getTestId","ComponentDefaultTestId","MENU_ITEM_BUTTON","cx","styles","itemButton","role","Button","buttonComponent","active","size","blurOnMouseUp","Object","assign","isSelectable","isMenuChild","withStaticProps","kinds","tooltipPositions","TooltipPositionsEnum"],"mappings":"soBAsFA,IAAMA,EAAiB,SAAHC,GAqBM,IApBxBC,EAASD,EAATC,UAASC,EAAAF,EACTG,KAAAA,OAAO,IAAHD,EAAG,UAASA,EAAAE,EAAAJ,EAChBK,SAAAA,OAAW,IAAHD,EAAG,KAAIA,EAAAE,EAAAN,EACfO,UAAAA,OAAY,IAAHD,EAAG,KAAIA,EAAAE,EAAAR,EAChBS,SAAAA,OAAW,IAAHD,GAAQA,EAChBE,EAAaV,EAAbU,cACAC,EAAKX,EAALW,MAAKC,EAAAZ,EACLa,gBAAAA,OAAe,IAAAD,GAAI,EAACA,EACpBE,EAAOd,EAAPc,QAAOC,EAAAf,EACPgB,gBAAAA,OAAkB,IAAHD,EAAG,QAAOA,EAAAE,EAAAjB,EACzBkB,iBAAAA,OAAmB,IAAHD,EAAG,IAAGA,EACtBE,EAAQnB,EAARmB,SACAC,EAAqBpB,EAArBoB,sBACAC,EAAuBrB,EAAvBqB,wBACAC,EAAkBtB,EAAlBsB,mBACAC,EAAOvB,EAAPuB,QACAC,EAASxB,EAATwB,UACAC,EAAyBzB,EAAzByB,0BACAC,EAAE1B,EAAF0B,GACeC,EAAU3B,EAAzB,eAEM4B,EAAMC,EAAO,MACbC,EAAsBD,EAAO,MAC7BE,EAAYC,EAAYJ,EAAKE,GAE7BG,EAAoBxB,GAAYC,EAChCwB,EAAiBxB,EAEjByB,EAAWtB,IAAoBF,EAE/ByB,EAAeC,EAAuB,CAC1CT,IAAAA,EACAR,sBAAAA,EACAC,wBAAAA,EACAc,SAAAA,EACAb,mBAAAA,EACAX,MAAAA,EACA2B,aAAa,IAGPC,EAAoBC,EAA0B,CACpD1B,QAAAA,EACAL,SAAAA,EACA0B,SAAAA,EACAxB,MAAAA,EACAW,mBAAAA,EACAgB,aAAa,EACbG,mBAAmB,EACnBpB,wBAAAA,EACAE,QAAAA,EACAa,aAAAA,EACAZ,UAAAA,EACAC,0BAAAA,IAZMc,gBAeR,OACEG,gBAACC,EAAO,CACNC,QAASX,EAAoBC,EAAiB,KAC9CW,SAAU7B,EACV8B,UAAW5B,GAEXwB,EAACK,cAAAC,GACCC,KAAK,QACLC,QAAQ,KAAI,cACCvB,GAAcwB,EAAUC,EAAuBC,iBAAkB3B,GAC9EA,GAAIA,EACJzB,UAAWqD,EAAGC,EAAOC,WAAYvD,GACjC2B,IAAKG,EACL0B,KAAK,0BACStB,GAEdO,EAAAK,cAACW,EACC,CAAAzD,UAAWsD,EAAOI,gBAClBC,OAAQzB,EACR1B,SAAUA,EACVJ,SAAUA,EACVE,UAAWA,EACXO,QAASyB,EACTpC,KAAMA,EACN0D,KAAK,QACLC,eAAe,GAEfpB,EAAAK,cAAA,MAAA,CAAK9C,UAAWsD,EAAOX,SAAUzB,KAK3C,EAEA4C,OAAOC,OAAOjE,EAAgB,CAC5BkE,cAAc,EACdC,aAAa,IAQf,IAAeC,EAAAA,EAAgEpE,EAAgB,CAC7FqE,MAAOV,EAAOU,MACdC,iBAAkBC"}