{"version":3,"file":"CustomSvgIcon.js","sources":["../../../../../../src/components/Icon/CustomSvgIcon/CustomSvgIcon.tsx"],"sourcesContent":["import React, { FunctionComponent, useCallback, AriaRole, Ref } from \"react\";\nimport SVG from \"react-inlinesvg\";\nimport useIconScreenReaderAccessProps from \"../../../hooks/useIconScreenReaderAccessProps\";\nimport VibeComponentProps from \"../../../types/VibeComponentProps\";\nimport { ComponentDefaultTestId, ComponentVibeId } from \"../../../tests/constants\";\nimport { getTestId } from \"../../../tests/test-ids-utils\";\nimport { useIsMounted } from \"../../../hooks/ssr/useIsMounted\";\n\nfunction modifySvgCode(svg: string, color = \"currentColor\") {\n  return svg.replace(/fill=\".*?\"/g, `fill=\"${color}\"`);\n}\n\nexport interface CustomSvgIconProps extends VibeComponentProps {\n  /**\n   * Callback fired when the icon is clicked.\n   */\n  onClick?: (event: React.MouseEvent) => void;\n  /**\n   * The source URL or object of the SVG icon.\n   */\n  src: string | object;\n  /**\n   * The accessible label for the icon.\n   */\n  ariaLabel?: string;\n  /**\n   * The tab index of the icon for keyboard navigation.\n   */\n  tabIndex?: number;\n  /**\n   * The ARIA role of the icon.\n   */\n  role?: AriaRole;\n  /**\n   * If true, hides the icon from screen readers.\n   */\n  ariaHidden?: boolean;\n  /**\n   * If true, makes the icon clickable.\n   */\n  clickable?: boolean;\n  /**\n   * If true, replaces the `fill` attribute in the SVG with `currentColor`.\n   */\n  replaceToCurrentColor?: boolean;\n  /**\n   * Overrides the default color of the icon.\n   */\n  customColor?: string;\n  /**\n   * Reference to the SVG element.\n   */\n  ref?: Ref<SVGElement>;\n}\n\nconst CustomSvgIcon: FunctionComponent<CustomSvgIconProps> = ({\n  className,\n  ref,\n  src,\n  onClick,\n  clickable,\n  ariaLabel,\n  ariaHidden,\n  replaceToCurrentColor = false,\n  customColor,\n  id,\n  \"data-testid\": dataTestId\n}) => {\n  const screenReaderAccessProps = useIconScreenReaderAccessProps({\n    isClickable: clickable,\n    label: ariaLabel,\n    isDecorationOnly: ariaHidden\n  });\n\n  const isMounted = useIsMounted();\n\n  const svgProcessor = useCallback(\n    (svg: string) => {\n      if (replaceToCurrentColor) return modifySvgCode(svg, \"currentColor\");\n      if (customColor) return modifySvgCode(svg, customColor);\n      return svg;\n    },\n    [replaceToCurrentColor, customColor]\n  );\n\n  if (typeof src !== \"string\") return null;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const SVGComponent = (SVG.default || SVG) as React.FC<any>; // fix esm issue\n\n  const PlaceHolder = <div className={className} id={id}></div>;\n\n  if (!isMounted) {\n    // placeholder for server side rendering\n    return PlaceHolder;\n  }\n  return (\n    <SVGComponent\n      innerRef={ref}\n      {...screenReaderAccessProps}\n      onClick={onClick}\n      loader={PlaceHolder} // avoid flickering\n      src={src}\n      className={className}\n      preProcessor={svgProcessor}\n      id={id}\n      data-testid={dataTestId || getTestId(ComponentDefaultTestId.SVG_ICON, id)}\n      data-vibe={ComponentVibeId.ICON}\n    >\n      {PlaceHolder}\n    </SVGComponent>\n  );\n};\n\nexport default CustomSvgIcon;\n"],"names":["modifySvgCode","svg","replace","concat","arguments","length","undefined","CustomSvgIcon","_ref","className","ref","src","onClick","_ref$replaceToCurrent","replaceToCurrentColor","customColor","id","dataTestId","screenReaderAccessProps","useIconScreenReaderAccessProps","isClickable","clickable","label","ariaLabel","isDecorationOnly","ariaHidden","isMounted","useIsMounted","svgProcessor","useCallback","SVGComponent","SVG","default","PlaceHolder","React","createElement","Object","assign","innerRef","loader","preProcessor","getTestId","ComponentDefaultTestId","SVG_ICON","ComponentVibeId","ICON"],"mappings":"wVAQA,SAASA,EAAcC,GACrB,OAAOA,EAAIC,QAAQ,uBAAaC,OADOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,eACM,KAClD,CA6CA,IAAMG,EAAuD,SAA1CC,GAYd,IAXHC,EAASD,EAATC,UACAC,EAAGF,EAAHE,IACAC,EAAGH,EAAHG,IACAC,EAAOJ,EAAPI,QAGUC,EAAAL,EACVM,sBAAAA,OAAwB,IAAHD,GAAQA,EAC7BE,EAAWP,EAAXO,YACAC,EAAER,EAAFQ,GACeC,EAAUT,EAAzB,eAEMU,EAA0BC,EAA+B,CAC7DC,YATOZ,EAATa,UAUEC,MATOd,EAATe,UAUEC,iBATQhB,EAAViB,aAYMC,EAAYC,IAEZC,EAAeC,GACnB,SAAC5B,GACC,OAAIa,EAA8Bd,EAAcC,EAAK,gBACjDc,EAAoBf,EAAcC,EAAKc,GACpCd,CACT,GACA,CAACa,EAAuBC,IAG1B,GAAmB,iBAARJ,EAAkB,OAAO,KAGpC,IAAMmB,EAAgBC,EAAIC,SAAWD,EAE/BE,EAAcC,EAAAC,cAAA,MAAA,CAAK1B,UAAWA,EAAWO,GAAIA,IAEnD,OAAKU,EAKHQ,EAACC,cAAAL,EACCM,OAAAC,OAAA,CAAAC,SAAU5B,GACNQ,EAAuB,CAC3BN,QAASA,EACT2B,OAAQN,EACRtB,IAAKA,EACLF,UAAWA,EACX+B,aAAcZ,EACdZ,GAAIA,gBACSC,GAAcwB,EAAUC,EAAuBC,SAAU3B,GAAG,YAC9D4B,EAAgBC,OAE1BZ,GAfIA,CAkBX"}