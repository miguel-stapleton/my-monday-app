import{defineProperty as e}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as t}from"../../../../_virtual/_tslib.js";import r,{forwardRef as n,useCallback as o,useEffect as i,useMemo as l}from"react";import s from"../TableBody/TableBody.js";import a from"./TableVirtualizedBody.module.scss.js";import{FixedSizeList as c}from"react-window";import{useTable as m}from"../context/TableContext/TableContext.js";import u from"classnames";import{getTestId as d}from"../../../tests/testIds.js";import{ComponentDefaultTestId as f}from"../../../tests/constants.js";import{RowHeights as v}from"../Table/TableConsts.js";import p from"react-virtualized-auto-sizer";import{useTableRowMenu as b}from"../context/TableRowMenuContext/TableRowMenuContext.js";var h=r.memo((function(e){var n,o=e.style,i=(0,e.rowRenderer)(e.item),l=t(o,["width"]);return r.cloneElement(i,{style:Object.assign(Object.assign({},l),null===(n=i.props)||void 0===n?void 0:n.style)})})),T=n((function(T,g){var j=T.items,w=T.rowRenderer,y=T.onScroll,E=T.columns,R=T.headerRenderer,x=T.id,z=T.className,C=T["data-testid"],B=T.overscanCount,L=void 0===B?1:B,_=m(),O=_.size,S=_.virtualizedListRef,V=_.onVirtualizedListScroll,A=_.markTableAsVirtualized,D=b().resetHoveredRow,H=!!E&&!!R,I=o((function(e){var t=e.target;D(),V({target:t,currentTarget:t})}),[D,V]);i((function(){var e=S.current;if(e)return e.addEventListener("scroll",I),function(){e.removeEventListener("scroll",I)}}),[I,S]);var M=o((function(e){H||null==y||y(e.scrollDirection,e.scrollOffset,e.scrollUpdateWasRequested)}),[y,H]),N=o((function(e){var t=e.index;return H&&0===t?null:r.createElement(h,{item:j[H?t-1:t],rowRenderer:w,style:e.style})}),[j,w,H]);i((function(){H||A()}),[A,H]);var P=l((function(){return H?n((function(e,n){var o=e.children,i=t(e,["children"]);return r.createElement("div",Object.assign({ref:n},i),R(E),o)})):void 0}),[H,R,E]);return r.createElement(s,{className:u(a.tableBody,e({},a.withHeader,H),z),id:x,"data-testid":C||d(f.TABLE_VIRTUALIZED_BODY,x),ref:g},(null==j?void 0:j.length)&&r.createElement(p,null,(function(e){return r.createElement(c,{itemSize:v[O],height:e.height,itemCount:H?j.length+1:j.length,width:e.width,overscanCount:L,onScroll:M,outerRef:function(e){S.current=e},innerElementType:P},N)})))}));export{T as default};
//# sourceMappingURL=TableVirtualizedBody.js.map
